{% extends 'admin/base.html' %}

{% block content %}
<div style="margin: auto; width: 300px; text-align: center;">
    <p style="text-align: center; margin: 0; padding: 0;">First name</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="text" id="first-name">
    <p style="text-align: center; margin: 0; padding: 0;">Last name</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="text" id="last-name">
    <p style="text-align: center; margin: 0; padding: 0;">Email</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="email" id="email">
    <p style="text-align: center; margin: 0; padding: 0;">Username</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="text" id="username">
    <p style="text-align: center; margin: 0; padding: 0;">Password</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="password" id="password">
    <p style="text-align: center; margin: 0; padding: 0;">Confirm password</p>
    <input style="padding: 10px; border: 2px solid grey; border-radius: 10px;" type="password" id="confirm-password"><br><br>
    <button style="cursor: pointer; background-color: silver; padding: 10px 20px; border-radius: 10px;" onclick="register()">Register</button><br><br>
    <p style="text-align: center; margin: 0; padding: 0;">Already have an account? <a href="/page-admin/login">Login</a></p>
</div>
<script>
    function register()
    {
        var firstName = document.querySelector('#first-name').value;
        var lastName = document.querySelector('#last-name').value;
        var email = document.querySelector('#email').value;
        var username = document.querySelector('#username').value;
        var password = document.querySelector('#password').value;
        var confirmPassword = document.querySelector('#confirm-password').value;

        if(password === confirmPassword)
        {
            $.ajax({
                url: "{% url 'admin-register' %}",
                type: 'POST',
                data: {
                    firstName: firstName,
                    lastName: lastName,
                    email: email,
                    username: username,
                    password: password,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: (res) => {
                    console.log(res);
                    if(res == 'ok') {
                        location.pathname = '/page-admin/login'
                    }
                },
                error: (err) => {
                    console.log(err);
                }
            });
        }
    }
</script>
{% endblock %}